## Exploring the Rust Compiler

### Level / duration

Intermediate / 45 minutes

### Context

The Rust compiler is at the heart of the Rust ecosystem. Understanding its internal workings and the various aspects of compilation can be extremely instructive for Rust developers. 

This kata aims to explore certain aspects of the Rust compiler and provide a better understanding of its operation.

### Objective

The goal of this kata is to delve into the workings of the Rust compiler, explore its configuration options, understand the compilation steps, and manipulate the error messages generated.

### Prerequisites

Master the [00-install](https://github.com/ThalesGroup/rust-coding-dojo/blob/main/katas/00-setup/00-install.md) and [01-cargo](https://github.com/ThalesGroup/rust-coding-dojo/blob/main/katas/00-setup/01-cargo.md) katas first.


### Tasks

1. **Compiler Configuration:**
   - Explore the Rust compiler's configuration file, often located in the `.cargo` directory of your user directory.
   - Familiarize yourself with available configuration options such as [compilation parameters](https://doc.rust-lang.org/rustc/codegen-options/index.html), [optimizations](https://doc.rust-lang.org/rustc/profile-guided-optimization.html?highlight=optimization#profile-guided-optimization), [debugging levels](https://doc.rust-lang.org/rustc/codegen-options/index.html?highlight=debugging%20level#debuginfo), etc.
   - Modify the default configuration according to your preferences by editing the configuration file or using specific commands.

2. **Compilation Process Analysis:**
   - Select an existing small Rust project or create a new one for analysis.
   - Execute the command `cargo build --verbose` to initiate compilation with detailed output.
   - Analyze compilation steps such as dependency resolution, actual compilation, [linking](https://doc.rust-lang.org/rustc/command-line-arguments.html?highlight=linking#linking-modifiers-bundle), etc.
   - Understand the order in which these steps are executed and their impact on the final result.

3. **Error Message Manipulation:**
   - Intentionally introduce errors into your source code, such as syntax errors, references to undefined variables, etc.
   - Run the `cargo build` command again to trigger error message generation by the compiler.
   - Carefully analyze each error message generated by the compiler and understand its meaning.
   - Follow the correction suggestions provided by the compiler to resolve errors and ensure your code compiles successfully.

4. **Exploring Intermediate Files:**
   - After compiling your project, explore the generated files in the `target` directory of your project.
   - Identify object files (`.o` on Unix systems), linking files (`.rlib`), runtime files, etc.
   - Understand the role of each type of file in the compilation process and how they contribute to generating the final binary or library.

5. **Code Optimization:**
   - Explore different [optimization](https://doc.rust-lang.org/rustc/profile-guided-optimization.html?highlight=optimization#profile-guided-optimization) options available in the Rust compiler documentation.
   - Apply optimizations to your project's source code by modifying the compiler configuration or adding specific code annotations.
   - Compare the performance and size of the generated binary before and after applying optimizations to assess their impact.

By following these detailed tasks, you will gain a thorough understanding of the internal workings of the Rust compiler and develop valuable skills for optimizing your code and effectively resolving compilation issues.